# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ "unknown port"

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–û—à–∏–±–∫–∞ `Error: listen tcp: lookup tcp/$PORT: unknown port` –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∫–æ–≥–¥–∞:

1. –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `$PORT` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏–ª–∏ –ø—É—Å—Ç–∞—è
2. Docker –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `$PORT` –≤ –∫–æ–º–∞–Ω–¥–µ CMD
3. Railway –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é PORT –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω Dockerfile

–°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ `start.sh` –∫–æ—Ç–æ—Ä—ã–π:
- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è PORT (8090)
- –í—ã–≤–æ–¥–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ—Ä—Ç–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –ó–∞–ø—É—Å–∫–∞–µ—Ç PocketBase —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–æ—Ä—Ç–æ–º

```dockerfile
# –°–æ–∑–¥–∞–µ–º —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ PORT
RUN echo '#!/bin/sh' > /pocketbase/start.sh && \
    echo 'PORT=${PORT:-8090}' >> /pocketbase/start.sh && \
    echo 'echo "Starting PocketBase on port $PORT"' >> /pocketbase/start.sh && \
    echo './pocketbase serve --http=0.0.0.0:$PORT' >> /pocketbase/start.sh && \
    chmod +x /pocketbase/start.sh

# –ó–∞–ø—É—Å–∫–∞–µ–º PocketBase —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç
CMD ["/pocketbase/start.sh"]
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω railway.json

–£–±—Ä–∞–Ω `startCommand` –∏–∑ railway.json, —Ç–∞–∫ –∫–∞–∫ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ —Ç–µ–ø–µ—Ä—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ Dockerfile.

### 3. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ Railway —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è:
```
PORT=8090
```

## üöÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –¢–µ—Å—Ç —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π PORT
PORT=8090 docker run -p 8090:8090 jab-pocketbase

# –¢–µ—Å—Ç –±–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π PORT (–¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å 8090)
docker run -p 8090:8090 jab-pocketbase
```

### Railway —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑:**
   ```bash
   npx railway up --detach
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   npx railway logs
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ health check:**
   ```bash
   curl https://your-app.railway.app/api/health
   ```

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í Railway –ø–∞–Ω–µ–ª–∏ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
```
PORT=8090
PB_DATA_DIR=/pocketbase/pb_data
```

### –õ–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

–°–∫—Ä–∏–ø—Ç `start.sh` –≤—ã–≤–æ–¥–∏—Ç:
```
Starting PocketBase on port 8090
```

–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –ø–æ–Ω—è—Ç—å, –∫–∞–∫–æ–π –ø–æ—Ä—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ persists, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:

1. **–Ø–≤–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø–æ—Ä—Ç –≤ Railway:**
   ```
   PORT=8090
   ```

2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—Ç:**
   ```dockerfile
   CMD ["./pocketbase", "serve", "--http=0.0.0.0:8090"]
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Railway –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:**
   - https://docs.railway.app/deploy/dockerfiles
   - https://docs.railway.app/reference/environment-variables

## üìã –ß–µ–∫-–ª–∏—Å—Ç

- [ ] Dockerfile –æ–±–Ω–æ–≤–ª–µ–Ω —Å —Å–∫—Ä–∏–ø—Ç–æ–º start.sh
- [ ] railway.json –æ–±–Ω–æ–≤–ª–µ–Ω (—É–±—Ä–∞–Ω startCommand)
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è PORT —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ Railway
- [ ] –û–±—Ä–∞–∑ –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω –∏ –∑–∞–¥–µ–ø–ª–æ–µ–Ω
- [ ] –õ–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –Ω–∞ –Ω–∞–ª–∏—á–∏–µ "Starting PocketBase on port"
- [ ] Health check —Ä–∞–±–æ—Ç–∞–µ—Ç

## üÜò –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Railway –ª–æ–≥–∏:**
   ```bash
   npx railway logs --tail
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```bash
   npx railway variables
   ```

3. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Ä—Ç:**
   –ò–∑–º–µ–Ω–∏—Ç–µ CMD –≤ Dockerfile –Ω–∞:
   ```dockerfile
   CMD ["./pocketbase", "serve", "--http=0.0.0.0:8090"]
   ```

4. **–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ Railway –ø–æ–¥–¥–µ—Ä–∂–∫–µ:**
   - https://railway.app/discord
   - https://docs.railway.app/support
